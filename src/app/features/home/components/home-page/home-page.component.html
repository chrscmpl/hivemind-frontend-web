@let isMobile = breakpoints.isMobile();

<div class="h-full relative">
  <div
    class="sticky top-0 left-0 px-4 bg-background-base-alt h-20 flex items-center max-w-[100vw] overflow-hidden app-home-nav"
  >
    <app-feed-selector
      [formControl]="feedControl"
      ngDefaultControl
      buttonAppearance="secondary-grayscale"
    />
  </div>
  <div class="overflow-hidden min-h-0">
    <tui-carousel
      [index]="index"
      (indexChange)="onCarouselChange($event)"
      [draggable]="isMobile"
      class="!min-h-0 top-0 left-0 max-w-[100vw]"
    >
      @for (feed of feeds; track $index) {
        <div *tuiItem>
          <tui-scrollbar
            class="min-h-0 overflow-scroll h-[calc(100vh-8rem)] pb-4"
            [hidden]="isMobile"
            [class.w-screen]="isMobile"
          >
            <div class="flex justify-center" [class.pr-12]="!isMobile">
              <div class="w-full" [class.max-w-3xl]="!isMobile">
                @if (feed.fetch) {
                  <app-idea-feed
                    [sort]="feed.sort"
                    [key]="feed.sort"
                    age="7d"
                    [page]="1"
                    [limit]="10"
                    includeOwnVotes
                    includeUsers
                  />
                }
                <tui-loader
                  [showLoader]="true"
                  size="xxl"
                  [inheritColor]="true"
                  class="text-background-neutral-1"
                />
              </div>
            </div>
          </tui-scrollbar>
        </div>
      }
    </tui-carousel>
  </div>
</div>
